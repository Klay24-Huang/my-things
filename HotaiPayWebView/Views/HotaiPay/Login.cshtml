
@{
    ViewBag.Title = "Login";
}

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>和泰集團會員登入</title>
    <link rel="stylesheet" href="~/Content/HotaiPayCss/normalize.css">

    <link rel="stylesheet" href="~/Content/HotaiPayCss/bootstrap.css">
    <link rel="stylesheet" href="~/Content/HotaiPayCss/style.css">


</head>

<body>
    <header class="d-flex justify-content-center align-items-center"><h6 style="margin-top: 8px;">和泰集團會員登入</h6></header>

    <div class="container text-center" style="max-width: 414px;">
        <!-- 提示文字＋圖-->
        <div class="web-img mt-8">

            <img class="object-fit mb-8" alt="iRent汽機車共享" src="~/images/hotai-logo.svg">
        </div>
        <div id="VuePage">
            <h6 class="mb-4">和泰集團會員登入</h6>


            <div class="input-box mb-2">
                <input class="input-light" type="text" v-model="form.Phone" placeholder="手機號碼">

            </div>

            <div class="input-box mb-2">
                <input id="demo_input" class="input-light" type="password" v-model="form.UserPwd" placeholder="密碼">
                <label><img src="~/images/eye-slash-regular.svg" alt="" id="eyes"></label>
            </div>
            <div class="text-right">
                <a class="text-gray text-underline" href="">忘記密碼</a>
            </div>


            <button type="button" class="btn btn-blue my-3">登入</button>
            <a class="text-gray text-underline" href="">立即註冊</a>
        </div>



    </div>
    @section scripts {
        <script>
        var VuePage = new Vue({
            el: '#VuePage'
            , data: function () {
                var data = {
                    form: {}
                };
                return data;
            }
            , methods: {
                // 執行登入按鈕
                DoLogin: function () {
                    var self = this;

                    // 組合表單資料
                    var postData = {};
                    postData['Phone'] = self.form.Phone;
                    postData['UserPwd'] = self.form.UserPwd;

                    // 使用 jQuery Ajax 傳送至後端
                    $.ajax({
                        url:'@Url.Content("~/HotaiPay/DoLogin")',
                        method:'POST',
                        dataType:'json',
                        data: { inModel: postData },
                        success: function (datas) {
                            if (datas.ErrMsg) {
                                alert(datas.ErrMsg);
                                return;
                            }
                            alert(datas.ResultMsg);
                        },
                        error: function (err) {
                            $('#ErrorMsg').html(err.responseText);
                            $('#ErrorAlert').modal('toggle');
                        },
                    });
                }
            }
        })
        </script>
    }

    <script>
    //獲取元素（兩種方式都可以）
        var input = document.getElementById("demo_input")
        var imgs = document.getElementById('eyes');
        //下面是一個判斷每次點選的效果
        var flag = 0;
        imgs.onclick = function () {
            if (flag == 0) {
                input.type = 'text';
                eyes.src = '~/images/eye-regular.svg';//睜眼圖
                flag = 1;
            } else {
                input.type = 'password';
                eyes.src = '~/images/eye-slash-regular.svg';//閉眼圖
                flag = 0;
            }
        }</script>

</body>
</html>