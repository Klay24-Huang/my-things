# 自動化表單填寫功能開發規格書

## 專案概述

本專案旨在為線上課程報名系統開發自動化表單填寫功能，提供使用者示範和測試用途。系統將根據預錄製的操作步驟JSON檔案，自動執行DOM操作來填寫表單。

## 功能需求

### 1. 自動化填寫流程

系統需要按照以下順序執行自動化填寫：

1. **基本資料填寫階段** (`basic_information.json`)
   - 自動點擊「開始填寫」按鈕
   - 依序填寫所有基本資料欄位
   - 自動提交基本資料表單

2. **課程選擇階段** (`course_selection.json`)  
   - 自動選擇課程類型
   - 設定上課時段偏好
   - 填寫特殊需求說明
   - 完成最終確認

### 2. 使用者體驗增強

#### 2.1 視覺回饋系統
- **懸浮進度條**：頂部顯示當前執行步驟和整體進度
- **遮罩層**：自動填寫期間顯示半透明黑色遮罩，防止使用者干擾
- **元素高亮**：正在操作的表單元素會有藍色光暈效果
- **載入動畫**：顯示旋轉載入圖示和提示文字

#### 2.2 步驟確認機制
- 每個主要步驟完成後暫停執行
- 顯示Toast通知要求使用者確認
- 提供「確認並繼續」或「重新填寫」選項

### 3. 技術架構

#### 3.1 JSON檔案格式
```json
{
    "title": "步驟名稱",
    "steps": [
        {
            "type": "click|change",
            "selector": "CSS選擇器",
            "value": "填入值（僅change類型）",
            "description": "操作描述"
        }
    ]
}
```

#### 3.2 DOM操作引擎
- 支援點擊操作 (`click`)
- 支援表單填寫操作 (`change`)
- 智能元素查找和錯誤處理
- 操作間隔控制（800ms）

#### 3.3 狀態管理
- 自動填寫進行狀態追蹤
- 步驟執行狀態記錄
- 錯誤處理和回滾機制

## 實作細節

### 4. 核心類別與方法

#### 4.1 CourseRegistrationApp 擴充功能
```javascript
// 自動填寫相關屬性
this.autoFillInProgress = false;
this.autoFillData = this.loadAutoFillData();

// 主要方法
async startAutoFill()           // 啟動自動填寫
async executeAutoFillStep()     // 執行單一步驟
async executeAutoFillAction()   // 執行單一操作
```

#### 4.2 UI控制方法
```javascript
showAutoFillProgressBar()       // 顯示進度條
updateAutoFillProgress()        // 更新進度狀態  
showAutoFillMask()             // 顯示遮罩層
showStepCompletionToast()      // 顯示步驟完成通知
```

### 5. 樣式設計規範

#### 5.1 進度條樣式
- 固定在頁面頂部
- 漸層背景色（#667eea 到 #764ba2）
- 包含步驟圓圈和文字標籤
- 支援 active/completed 狀態

#### 5.2 遮罩層樣式  
- 全螢幕半透明黑色背景 (rgba(0,0,0,0.6))
- 居中顯示載入動畫和提示文字
- z-index: 1000 確保在最上層

#### 5.3 Toast通知樣式
- 固定在右下角
- 白色卡片設計with陰影效果
- 包含圖示、標題、訊息和操作按鈕
- 滑入/滑出動畫效果

### 6. 響應式設計

#### 6.1 行動裝置適配
- 進度條改為垂直排列
- Toast通知改為全寬度顯示
- 按鈕和文字大小自動調整

#### 6.2 媒體查詢斷點
- 平板：≤ 768px
- 手機：≤ 480px

## 使用說明

### 7. 啟動自動填寫

1. 在「流程小助手」頁面點擊「🤖 自動填寫示範」按鈕
2. 系統自動顯示頂部進度條
3. 依序執行基本資料和課程選擇填寫
4. 每步驟完成後顯示確認提示
5. 使用者可選擇繼續或重新開始

### 8. 錯誤處理

- 元素找不到時記錄警告並跳過
- 操作失敗時顯示錯誤Toast
- 提供重新填寫選項
- 自動重置表單狀態

## 測試與驗證

### 9. 功能測試項目

- [ ] 自動填寫按鈕正常啟動
- [ ] 進度條顯示和狀態更新正確
- [ ] 遮罩層能有效阻止使用者操作
- [ ] 所有表單欄位能正確填入
- [ ] Toast通知按預期顯示
- [ ] 響應式設計在各裝置正常運作
- [ ] 錯誤情況能妥善處理

### 10. 效能考量

- 操作間隔800ms保證使用者能看清執行過程
- Toast自動隱藏8秒避免畫面阻塞
- 進度條3秒後自動隱藏減少視覺干擾
- CSS transition效果提升使用者體驗

## 維護與擴展

### 11. 客製化設定

- JSON檔案可輕鬆修改填寫內容
- CSS變數支援主題色彩調整
- 操作間隔時間可程式化設定
- Toast訊息內容可多語言化

### 12. 未來增強功能

- 支援更多表單操作類型
- 加入操作錄製功能
- 提供自訂填寫資料介面
- 集成使用者行為分析

---

**開發完成日期**: 2025-08-04  
**版本**: 1.0.0  
**技術棧**: HTML5, CSS3, Vanilla JavaScript