@model IEnumerable<Domain.TB.BackEnd.BE_EvTimeLine>

@{
    Layout = null;
    int Mode = (ViewData["Mode"] == null) ? 0 : Convert.ToInt32(ViewData["Mode"]);
    List<Domain.TB.BackEnd.BE_EvTimeLine> lstEv = null;
    int len = 0;
    if (Model != null)
    {
        lstEv = Model.ToList<Domain.TB.BackEnd.BE_EvTimeLine>();
        len = lstEv.Count();
    }
}

<!DOCTYPE html>

<html>
<head>
    <link rel="shortcut icon" href="~/assets/img/favicon.ico" />
    <meta charset="utf-8">
    <title>iRent無人化租車共享系統</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Styles -->
    <link href='~/assets/EvTimeLine/chosen.css' rel='stylesheet' tyle="text/css">
    <link href="~/assets/EvTimeLine/theme/avocado.css" rel="stylesheet" type="text/css" id="theme-style">
    <link href="~/Content/css/prism.css" rel="stylesheet/less" type="text/css">
    <link href='~/assets/EvTimeLine/fullcalendar.css' rel='stylesheet' tyle="text/css">
    <link href="~/Content/css/bootstrap.css" rel="stylesheet" type="text/css">
    <link href="~/Content/css/jquery-ui.css" rel="stylesheet">
    <link href="~/Content/css/sweetalert.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,400,600,300' rel='stylesheet' type='text/css'>
    <link href="~/Content/css/cabinet.css" rel="stylesheet" type="text/css" id="theme-style">
    <link href="~/assets/EvTimeLine/evTrack.css" rel="stylesheet" type="text/css">
    <link href="~/Content/css/style.css" rel="stylesheet" type="text/css">
    @*<link href="~/assets/css/jquery-ui-timepicker-addon.css" rel="stylesheet" type="text/css">
        <link href="~/assets/css/bootstrap-responsive.css" rel="stylesheet">
        <link href="~/assets/css/jquery.autocomplete.css" rel="stylesheet">
        <script src="~/assets/js/jquery/1.9.1/jquery-1.9.1.js"></script>*@

    @*<script src="~/assets/js/jquery.autocomplete.js"></script>*@

    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVquooZC9O0F84LwJ-FRL3LzVmP_ExJ5M&libraries=drawing"></script>

    <!-- import js -->
    <script src="~/Scripts/js/jquery-3.5.1.min.js"></script>
    <script src="~/Scripts/js/jquery-ui.js"></script>
    <script src="~/Scripts/plugin/sweetalert/dist/sweetalert.min.js"></script>
    @*<script src="~/Scripts/js/jquery.autocomplete.js"></script>*@
    <script src="~/Scripts/js/popper.js"></script>
    <script src="~/Scripts/js/bootstrap.bundle.min.js"></script>
    <script src="~/Scripts/js/jquery-filestyle.js"></script>
    <script src="~/Scripts/js/flatpickr.js"></script>
    <script src="~/Scripts/js/jquery.validate.js"></script>
    <script src="~/Scripts/js/moment-with-locales.min.js"></script>
    <script src="~/Scripts/js/footable/footable.all.min.js"></script>
    @*<script src="~/Scripts/plugin/footable-bootstrap/js/footable.js"></script>*@
    @*<script src="~/Content/plugins/footable-components.latest/js/footable.core.js"></script>
        <script src="~/Content/plugins/footable-components.latest/js/footable.paging.js"></script>
        <script src="~/Content/plugins/footable-components.latest/js/footable.sorting.js"></script>
        <script src="~/Content/plugins/footable-components.latest/js/footable.filtering.js"></script>*@
    @*<script src="~/Content/plugins/footable-bootstrap.latest/js/footable.js"></script>*@
    <script src="~/Scripts/plugin/busy-load-master/app.js"></script>
    <script src="~/Scripts/js/CommonFunc.js"></script>
    <!-- HTML5, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
        <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

</head>
<body>
    <!-- Map -->
    <div class="container-fluid bg-dark" style="padding-left:50px;">
        <ul id="myTab" class="nav nav-tabs">
            <li class="active"><a href="#home" class="btn btn-danger" data-toggle="tab">地圖顯示</a></li>
            <li><a href="#table" class="btn btn-outline-info" data-toggle="tab">表格顯示</a></li>
        </ul>
        <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade in active" id="home">
                <div class="iframe-container">
                    <div class="gmaps" id="map"></div>
                </div>
            </div>
            <div class="tab-pane fade" id="table">
                <div class="row-fluid">

                    <!-- Add News: Box -->
                    <div class="span12">

                        <!-- Add News: Content -->
                        <div class="well">

                            <!-- Add News: WYSIWYG Edior -->
                            <table class="table-hover table">
                                <thead>
                                    <tr>
                                        <th>序號</th>
                                        <th>車牌</th>
                                        <th>車機狀態</th>
                                        <th>營運狀態</th>
                                        <th>衛星狀態</th>
                                        <th>速度</th>
                                        <th>回報位置</th>
                                        <th>景點</th>
                                        <th>回報時間</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @for (int i = 0; i < len; i++)
                                    {
                                        string address = "addr" + i.ToString();
                                        string Lat = "Lat" + i.ToString();
                                        string Lng = "Lng" + i.ToString();
                                        <tr>
                                            <td>@(i+1)</td>
                                            <td>@lstEv[i].CarNo</td>
                                            <td>開機</td>
                                            <td>@((lstEv[i].CarStatus==0)?"可出租":"H"+ lstEv[i].CarStatus.ToString().PadLeft(7,'0'))</td>
                                            <td>@((lstEv[i].GPSStatus == 0)?"未定位":"已定位")</td>
                                            <td>@((lstEv[i].SPEED == 2) ? 0 : Convert.ToInt32(lstEv[i].SPEED))</td>
                                            <td><span id="@address"></span><input type="hidden" id="@Lat" value="@lstEv[i].Lat"><input type="hidden" id="@Lng" value="@lstEv[i].Lng"></td>
                                            <td></td>
                                            <td>@lstEv[i].GPSTime</td>


                                        </tr>
                                    }



                                </tbody>
                            </table>
                            <!-- / Add News: WYSIWYG Edior -->



                        </div>


                        <!-- / Add News: Content-->



                    </div>


                    <!--/ Add News: Box-->



                </div>


            </div>


        </div>


    </div>


    <!-- / Map-->


    <div class="cabinet-left">
        <div class="cabinet-drawer">
            <div class="cabinet-knob cabinet-knob">
                <p>軌跡查詢</p>
            </div>
            <div class="cabinet-box cabinet-box">
                <div class="row-fluid">

                    <!-- Add News: Box -->
                    <div class="span12">

                        <!-- Add News: Content -->
                        <div class="well no-padding">
                            @*<label for="neer" class="col-sm-12 control-label">查詢條件</label>*@
                            @using (Html.BeginForm("Index", "Monitor", FormMethod.Post, new { id = "formbookingQuery", @role = "form", @class = "form-horizontal" }))
                            {
                                <div class="form-group">
                                    <label for="call" class="col-sm-2 control-label">查詢條件</label>
                                    <div class="col-sm-10">
                                        <input type="radio" name="Mode" id="Mode0" value="0">以合約
                                        <input type="radio" name="Mode" id="Mode1" value="1">以車號
                                    </div>
                                </div>
                                <div class="form-group" id="OrderTerm" name="OrderTerm">
                                    <label for="number" class="col-sm-2 control-label">合約編號</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="OrderNum" name="OrderNum" pattern="(H)[0-9]{1,7}" placeholder="輸入合約編號" value="@((ViewData["OrderNum"]==null)?"":"H"+ ViewData["OrderNum"].ToString().PadLeft(7,'0'))">
                                    </div>
                                </div>
                                <div class="form-group" id="CarNoTerm" name="CarNoTerm">
                                    <label for="call" class="col-sm-2 control-label">查詢車號</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="ObjCar" name="ObjCar" placeholder="輸入車號" value="@((ViewData["CarNo"]==null?"":ViewData["CarNo"].ToString()))">
                                   
                                    </div>
                                </div>
                                <div class="form-group" id="DateTerm" name="DateTerm">
                                    <label for="start" class="col-sm-2 control-label">日期</label>
                                    <div class="col-sm-10 input-daterange input-group" style="padding-left: 15px; padding-right: 15px;" id="date-range">
                                        <input type="text" class="form-control" id="start" name="start" value="@((ViewData["SD"]==null?"":ViewData["SD"].ToString()))">
                                        <span class="input-group-addon bg-custom b-0">至</span>
                                        <input type="text" class="form-control" id="end" name="end" value="@((ViewData["ED"]==null?"":ViewData["ED"].ToString()))">
                                    </div>
                                </div>

                                <div class="form-group">
                                        <label for="address" class="col-sm-2 control-label">地址</label>
                                        <div class="col-sm-10">
                                            <input type="text" class="form-control" id="address" placeholder="輸入地址">
                                        </div>
                                    </div>
                                <div class="form-group">
                                    <div class="col-sm-offset-2 col-sm-10">
                                        <button id="btnQuery" name="btnQuery" class="btn btn-default">查詢</button>
                                    </div>
                                </div>
                                <input type="hidden" id="SearchLen" name="SearchLen" value="@len" />
                            }
                        </div>
                        <div class="well no-padding" id="TimeContent">
                            <label for="neer" class="col-sm-12 control-label">車輛軌跡時間</label>
                            <form class="form-horizontal" role="form">
                                <div class="form-group">
                                    <label for="who" class="col-xs-2 control-label">軌跡</label>
                                    <div class="col-xs-4">
                                        <select name="TimeLine" id="TimeLine">
                                            @for (int j = 0; j < len; j++)
                                            {
                                                string value = (j + 1).ToString() + ";" + lstEv[j].CarNo + ";" + lstEv[j].Lat.ToString() + ";" + lstEv[j].Lng.ToString() + ";" + lstEv[j].SPEED.ToString();
                                                value += ";" + lstEv[j].CarStatus + ";" + lstEv[j].CCNum + ";" + lstEv[j].FactoryYear + ";" + lstEv[j].GPSStatus + ";" + lstEv[j].GPSTime;
                                                string text = (j + 1).ToString() + ":" + lstEv[j].CarNo + "(" + lstEv[j].GPSTime + ")";
                                                <option value="@value">@text</option>
                                            }
                                        </select>
                                    </div>

                                </div>
                            </form>
                        </div>
                        <div class="well no-padding" id="InforContent">
                            <label for="neer" class="col-sm-12 control-label">車輛軌跡資訊</label>
                            <form class="form-horizontal" role="form">
                                <div class="form-group">
                                    <label for="who" class="col-xs-2 control-label">呼號</label>
                                    <div class="col-xs-4">
                                        <input type="text" class="form-control" id="who" readonly>
                                    </div>
                                    <label for="car" class="col-xs-2 control-label">車號</label>
                                    <div class="col-xs-4">
                                        <input type="text" class="form-control" id="car" readonly>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="status" class="col-xs-2 control-label">狀態</label>
                                    <div class="col-xs-4">
                                        <input type="text" class="form-control" id="status" readonly>
                                    </div>
                                    <label for="old" class="col-xs-2 control-label">車齡</label>
                                    <div class="col-xs-4">
                                        <input type="text" class="form-control" id="old" readonly>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="speed" class="col-xs-2 control-label">速度</label>
                                    <div class="col-xs-4">
                                        <input type="text" class="form-control" id="speed" readonly>
                                    </div>
                                    <label for="cc" class="col-xs-2 control-label">CC.</label>
                                    <div class="col-xs-4">
                                        <input type="text" class="form-control" id="cc" readonly>
                                    </div>
                                </div>
                                <div class="form-group">

                                    <label for="update" class="col-xs-2 control-label">更新時間</label>
                                    <div class="col-xs-4">
                                        <input type="text" class="form-control" id="update" readonly>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="neer" class="col-xs-2 control-label">最近地址</label>
                                    <div class="col-xs-10">
                                        <input type="text" class="form-control" id="neer" readonly>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <!-- / Add News: Content -->

                    </div>
                    <!-- / Add News: Box -->

                </div>

            </div>
        </div>
    </div>

</body>

<!-- Javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->

@*<script src="//code.jquery.com/jquery-1.11.3.js"></script>
    <script src="//code.jquery.com/ui/1.12.0-rc.1/jquery-ui.js"></script>*@
<script src="~/assets/EvTimeLine/datepicker-zh-TW.js"></script>
<script src="~/assets/EvTimeLine/jquery-ui-timepicker-addon.js"></script>
<script src="~/assets/EvTimeLine/EvTrack.js"></script>

<script type="text/javascript">
		var map_options = {
			center: new google.maps.LatLng(23.973875,120.982024),
			zoom: 8,
			mapTypeId: google.maps.MapTypeId.ROADMAP
		}

		map_canvas = document.getElementById('map');
		var map = new google.maps.Map(map_canvas, map_options);
		var markers = [];
		$(".cabinet-knob").on("click", function(){
			var parent = $(this).parent(".cabinet-drawer");
			if($(this).parent(".drawer-open").css("left")<="0px"){
				parent.removeClass("drawer-open");
				parent.siblings().removeClass("drawer-close");
			}else{
				parent.addClass("drawer-open");
				parent.removeClass("drawer-close");
				parent.siblings().addClass("drawer-close");
				parent.siblings().removeClass("drawer-open");
			}
		});
		var Mode = '@Mode';
    console.log("Mode="+Mode);
  
    document.getElementById("Mode"+Mode).checked = true;
    switch (Mode) {
        case "0":
            $('#OrderTerm').show();
            $('#CarNoTerm').hide();
            $('#DateTerm').hide();

            break;
        case "1":
            $('#OrderTerm').hide();
            $('#CarNoTerm').show();
            $('#DateTerm').show();

            break;
    }


</script>


<!-- Mirrored from lycaste.co/projects/avocadopanel/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 27 Jul 2016 07:40:43 GMT -->
</html>